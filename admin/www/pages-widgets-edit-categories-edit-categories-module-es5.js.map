{"version":3,"sources":["./src/app/pages/widgets/edit-categories/edit-categories.page.html","./src/app/pages/widgets/edit-categories/edit-categories.module.ts","./src/app/pages/widgets/edit-categories/edit-categories.page.scss","./src/app/pages/widgets/edit-categories/edit-categories.page.ts"],"names":[],"mappings":"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","file":"pages-widgets-edit-categories-edit-categories-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button class=\\\"custom-back-button\\\" defaultHref=\\\"homepage-setting\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <div class=\\\"header-logo\\\" slot=\\\"start\\\"><img src=\\\"../../../assets/img/shop-logo.png\\\"></div>\\r\\n    <ion-title text-center>Edit Categories</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"main-container\\\">\\r\\n\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <div class=\\\"input-wrap\\\">\\r\\n        <ion-label>Section Name</ion-label>\\r\\n        <ion-input class=\\\"form-input\\\" [(ngModel)]=\\\"sectionName\\\"></ion-input>\\r\\n      </div>\\r\\n    </ion-col>\\r\\n\\r\\n    <div *ngIf=\\\"isLoading; else dataLoaded;\\\" class=\\\"spinner\\\">\\r\\n      <ion-spinner name=\\\"dots\\\"></ion-spinner>\\r\\n    </div>\\r\\n  \\r\\n    <ng-template #dataLoaded>\\r\\n      <ion-grid>\\r\\n        <ion-row>\\r\\n          <ion-col size=\\\"4\\\">\\r\\n            <div class=\\\"input-wrap\\\">\\r\\n              <label>Design Type</label>&nbsp;<br>\\r\\n              <select [(ngModel)]=\\\"designType\\\">\\r\\n                <option value=\\\"normal\\\">normal</option>\\r\\n                <option value=\\\"combo\\\">combo</option>\\r\\n              </select>\\r\\n            </div>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"4\\\" *ngIf=\\\"designType === 'combo'\\\">\\r\\n            <div class=\\\"input-wrap\\\">\\r\\n              <label>End At</label><br>\\r\\n              <ion-input type=\\\"datetime-local\\\" [(ngModel)]=\\\"endAt\\\" [min]=\\\"todaysDateTime\\\"></ion-input>\\r\\n            </div>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n\\r\\n      <div *ngIf=\\\"!dataList.length\\\">\\r\\n        <p class=\\\"no-data-txt\\\">No data</p>\\r\\n      </div>\\r\\n  \\r\\n      <div *ngIf=\\\"dataList.length > 0\\\">\\r\\n        <ion-list class=\\\"s-c-list\\\" *ngFor=\\\"let data of dataList; let i=index\\\">\\r\\n          <ion-item lines=\\\"none\\\" (click)=\\\"selectParent(i)\\\">\\r\\n            <ion-label>{{data.name}}</ion-label>\\r\\n            <ion-checkbox slot=\\\"end\\\" [checked]=\\\"data.active\\\"></ion-checkbox>\\r\\n          </ion-item>\\r\\n          <hr class=\\\"line\\\">\\r\\n        </ion-list>\\r\\n      </div>\\r\\n      <ion-button (click)=\\\"onClickSave()\\\">\\r\\n        Save\\r\\n      </ion-button>\\r\\n    </ng-template>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { EditCategoriesPage } from './edit-categories.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditCategoriesPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [EditCategoriesPage]\r\n})\r\nexport class EditCategoriesPageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3dpZGdldHMvZWRpdC1jYXRlZ29yaWVzL2VkaXQtY2F0ZWdvcmllcy5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { AlertController, Events, LoadingController, ModalController } from '@ionic/angular';\r\nimport { LabelService } from 'src/app/services/label/label.service';\r\nimport { FiltersService } from 'src/app/services/filters/filters.service';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { first } from 'rxjs/operators';\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: 'app-edit-categories',\r\n  templateUrl: './edit-categories.page.html',\r\n  styleUrls: ['./edit-categories.page.scss'],\r\n})\r\nexport class EditCategoriesPage implements OnInit {\r\n\r\n  SELECT_CATEGORIES_LABELS: any;\r\n    SHARED_LABELS: any;\r\n    addedFilters = {};\r\n    dataList: any = [];\r\n    isLoading = true;\r\n    type = 'categories';\r\n    linkedList = [];\r\n    selectList=[];\r\n    categoryId:any;\r\n    sectionName:any;\r\n    sectionIndex:any;\r\n    sections:any\r\n    loading: any\r\n    pageId = ''\r\n    designType: string = \"normal\";\r\n    todaysDateTime = moment(new Date()).format('YYYY-MM-DDTHH:mm'); \r\n    endAt = null;\r\n\r\n  constructor(\r\n    private alertController: AlertController,\r\n    private events: Events,\r\n    private modalController: ModalController,\r\n    private labelService: LabelService,\r\n    private loadingController: LoadingController,\r\n    private filtersService: FiltersService,\r\n    private router: Router,\r\n    private activatedRoute: ActivatedRoute,\r\n    private angularFirestore: AngularFirestore) {\r\n  }\r\n\r\n    ionViewWillEnter() {\r\n      this.activatedRoute.queryParams.subscribe(async params => {\r\n          if (params && params.ID && params.index) {\r\n            this.categoryId = params.ID;\r\n            this.sectionIndex = params.index\r\n          }\r\n          if (params && params.pageId) {\r\n            this.pageId = params.pageId;\r\n          }\r\n        });\r\n\r\n      this.initializeSubscriptions();\r\n    }\r\n\r\n    ionViewWillLeave(){\r\n      this.removeSubscriptions()\r\n    }\r\n\r\n    removeSubscriptions(){\r\n      this.events.unsubscribe('widgets:addCategoriesSuccess');\r\n      this.events.unsubscribe('widgets:publishWidgetDataSuccess');\r\n      this.events.unsubscribe('widgets:categoryUpdateSuccess');\r\n    }\r\n\r\n    initializeSubscriptions(){\r\n      this.events.subscribe('widgets:addCategoriesSuccess', () => {\r\n        this.presentAlert('Section created successfully')\r\n        this.router.navigate(['homepage-setting']);\r\n      });\r\n      this.events.subscribe('widgets:categoryUpdateSuccess', () => {\r\n        this.presentAlert('Section updated successfully')\r\n        this.router.navigate(['homepage-setting']);\r\n      });\r\n      this.events.subscribe('widgets:publishWidgetDataSuccess',async (data) => {\r\n        let sections:any = await this.angularFirestore.collection('pages').doc(this.pageId).valueChanges().pipe(first()).toPromise();\r\n        if(sections && sections.sections){\r\n          this.sections = sections.sections;\r\n          this.sectionName = sections.sections[this.sectionIndex].sectionName;\r\n        }\r\n        this.dataList.forEach(element => {\r\n          if (data.categoryList.indexOf(element.id) > -1){\r\n            element.active = true\r\n            this.selectList.push(element.id)\r\n          }\r\n        });\r\n        this.designType = 'designType' in data ? data.designType : this.designType;\r\n        this.endAt = 'endAt' in data ? data.endAt : this.endAt;\r\n        if (this.loading){\r\n          this.loading.dismiss()\r\n        }\r\n      });\r\n    }\r\n\r\n    async ngOnInit() {\r\n        this.SELECT_CATEGORIES_LABELS = this.labelService.labels['SELECT_CATEGORIES'];\r\n        this.SHARED_LABELS = this.labelService.labels['SHARED'];\r\n        let dbList: any = [];\r\n        if (this.type === 'categories') {\r\n            dbList = await this.filtersService.getCategoriesWithSubcategories(); \r\n        }\r\n        if (this.type === 'brands') {\r\n            dbList = await this.filtersService.getBrands();\r\n        }\r\n          if(this.linkedList.length) {\r\n            dbList.map(parent => {\r\n              if(this.linkedList.includes(parent.id)) {\r\n                parent.active = true;\r\n              }\r\n              if(parent.sublist.length) {\r\n                parent.sublist.map(child => {\r\n                  if(this.linkedList.includes(child.id)) {\r\n                    child.active = true;\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n\r\n        this.dataList = dbList;\r\n        this.isLoading = false;\r\n        if (this.categoryId){\r\n          this.presentLoading()\r\n          this.events.publish('widgets:getWidgetData', this.categoryId);\r\n        }\r\n    }\r\n\r\n    closeModal() {\r\n        this.modalController.dismiss();\r\n    }\r\n\r\n    toggleParentCheck(i) {\r\n        this.dataList[i].active = !this.dataList[i].active;\r\n    }\r\n\r\n    selectParent(i) {\r\n      this.dataList[i].active = !this.dataList[i].active;\r\n      if ((this.selectList.indexOf(this.dataList[i].id) > -1) == false){\r\n        this.selectList.push(this.dataList[i].id)\r\n      }\r\n      else if (this.selectList.indexOf(this.dataList[i].id) > -1){\r\n        this.selectList.splice(this.selectList.indexOf(this.dataList[i].id),1)\r\n      }\r\n    }\r\n\r\n    async onClickSave() {\r\n      if(!this.sectionName){\r\n        this.presentAlert('Please Fill the name Properly')\r\n       }\r\n      else if(this.sectionName.length < 5){\r\n        this.presentAlert('Name should be atleast 5 characters')\r\n      }\r\n       else{\r\n         let indexArray = []\r\n         for (let i=0 ; i<this.selectList.length; i++){\r\n          indexArray.push(this.dataList.findIndex(ele => ele.id == this.selectList[i]))\r\n        }\r\n        this.bubbleSort(indexArray)\r\n         if (this.categoryId){\r\n          this.sections[this.sectionIndex].sectionName=this.sectionName\r\n          this.sections[this.sectionIndex]['designType'] = this.designType;\r\n          if (this.designType === 'normal') this.endAt = null; \r\n          this.sections[this.sectionIndex]['endAt'] = this.endAt;\r\n          await this.angularFirestore.collection('pages').doc(this.pageId).update({'sections':this.sections});\r\n          await this.angularFirestore.collection('widgets').doc(this.categoryId).update({\r\n             'designType': this.designType,\r\n             'endAt': this.endAt\r\n            });\r\n          this.events.publish('widgets:updateCategories', this.categoryId, this.selectList);\r\n         }\r\n         else{\r\n          this.events.publish('widgets:addCategories', this.selectList, this.sectionName, this.pageId);\r\n         }\r\n       }\r\n    }\r\n\r\n    bubbleSort(arr){\r\n      var len = arr.length;\r\n      for (var i = len-1; i>=0; i--){\r\n        for(var j = 1; j<=i; j++){\r\n          if(arr[j-1]>arr[j]){\r\n              var temp = arr[j-1];\r\n              arr[j-1] = arr[j];\r\n              arr[j] = temp;\r\n              var temp2 = this.selectList[j-1];\r\n              this.selectList[j-1] = this.selectList[j];\r\n              this.selectList[j] = temp2;\r\n           }\r\n        }\r\n      }\r\n      return arr;\r\n   }\r\n\r\n    async presentAlert(msg) {\r\n      const alert = await this.alertController.create({\r\n        message: msg,\r\n        buttons: ['OK']\r\n      });\r\n    \r\n      await alert.present();\r\n    }\r\n\r\n    async presentLoading() {\r\n      this.loading = await this.loadingController.create({\r\n        message: 'Please Wait...',\r\n        duration: 10000\r\n      });\r\n      await this.loading.present();\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}