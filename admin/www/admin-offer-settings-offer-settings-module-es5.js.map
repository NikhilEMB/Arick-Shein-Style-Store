{"version":3,"sources":["./src/app/admin/offer-settings/offer-settings.page.html","./src/app/admin/offer-settings/offer-settings.module.ts","./src/app/admin/offer-settings/offer-settings.page.scss","./src/app/admin/offer-settings/offer-settings.page.ts"],"names":[],"mappings":"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","file":"admin-offer-settings-offer-settings-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-menu-button slot=\\\"start\\\" class=\\\"menu-btn\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\r\\n    </ion-menu-button>\\r\\n    <div class=\\\"header-logo\\\" slot=\\\"start\\\"><img src=\\\"../../../assets/img/shop-logo.png\\\"></div>\\r\\n    <ion-title>Offers Setting</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content class=\\\"ion-no-padding\\\">\\r\\n  <div class=\\\"main-container\\\">\\r\\n\\r\\n    <div class=\\\"no-data ion-text-center\\\" *ngIf=\\\"allOffers && allOffers.length < 1\\\">\\r\\n      <img src=\\\"assets/img/no-category.png\\\" alt=\\\"\\\">\\r\\n      <h6>No Offers</h6>\\r\\n    </div>\\r\\n    \\r\\n    <!-- no data -->\\r\\n\\r\\n    <!-- heading -->\\r\\n    <div class=\\\"list-header\\\" *ngIf=\\\"allOffers && allOffers.length > 0\\\">\\r\\n      <ion-grid class=\\\"ion-no-padding\\\">\\r\\n        <ion-row >\\r\\n          <ion-col class=\\\"img\\\">\\r\\n            <p>image</p>\\r\\n          </ion-col>\\r\\n          <ion-col class=\\\"name\\\">\\r\\n            <p>name</p>\\r\\n          </ion-col>\\r\\n          <ion-col class=\\\"name\\\">\\r\\n            <p>Actions</p>\\r\\n          </ion-col>\\r\\n          <ion-col class=\\\"reorder\\\">\\r\\n            <p>reorder</p>\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      </ion-grid>\\r\\n      </div>\\r\\n      <!-- heading -->\\r\\n\\r\\n      <!-- categories list -->\\r\\n    <div class=\\\"list-container\\\" *ngIf=\\\"allOffers && allOffers.length > 0\\\">\\r\\n    \\r\\n    <ion-list class=\\\"ion-no-padding row-border\\\">\\r\\n      <ion-reorder-group (ionItemReorder)=\\\"onReorderOffers($event)\\\" disabled=\\\"false\\\" class=\\\"ion-no-padding\\\">\\r\\n        <ion-item *ngFor=\\\"let offer of allOffers; let i = index\\\">\\r\\n          <ion-grid class=\\\"ion-no-padding\\\">\\r\\n            <ion-row >\\r\\n              <ion-col  class=\\\"img\\\">\\r\\n                <ion-thumbnail style=\\\"margin-left: 5%;\\\" class=\\\"thumbnail\\\" *ngIf=\\\"offer.images.length\\\">\\r\\n                  <img *ngIf=\\\"!offer.images[0].mob && offer.images[0].url\\\" img-preloader=\\\"{{offer.images[0].url}}\\\">\\r\\n                  <img *ngIf=\\\"offer.images[0].mob\\\" img-preloader=\\\"{{offer.images[0].mob}}\\\">\\r\\n                </ion-thumbnail>\\r\\n                <ion-thumbnail style=\\\"margin-left: 5%;\\\" class=\\\"thumbnail\\\" *ngIf=\\\"!offer.images.length\\\">\\r\\n                  <img src='assets/img/img-preloader.png'>\\r\\n                </ion-thumbnail>\\r\\n              </ion-col>\\r\\n              <ion-col class=\\\"name\\\">\\r\\n                <p class=\\\"ion-text-capitalize\\\">{{offer.name}}</p>\\r\\n              </ion-col>\\r\\n              <ion-col class=\\\"action\\\">\\r\\n                <ion-button class=\\\"action-btn\\\" fill=\\\"clear\\\" (click)=\\\"editOffer(offer)\\\">\\r\\n                  <i class=\\\"flaticon-pencil-edit-button\\\" slot=\\\"icon-only\\\"></i>\\r\\n                </ion-button>\\r\\n                <ion-button class=\\\"action-btn\\\" fill=\\\"clear\\\" (click)=\\\"deleteOfferConfirm(offer.id)\\\">\\r\\n                  <i class=\\\"flaticon-null-21\\\" slot=\\\"icon-only\\\"></i>\\r\\n                </ion-button>\\r\\n              </ion-col>\\r\\n              <ion-col class=\\\"reorder\\\">\\r\\n                <ion-reorder>\\r\\n                  <div class=\\\"flat-sort\\\">\\r\\n                    <i class=\\\"flaticon-menu\\\"></i>\\r\\n                  </div>\\r\\n                </ion-reorder>\\r\\n             \\r\\n              </ion-col>\\r\\n            </ion-row>\\r\\n          </ion-grid>\\r\\n        </ion-item>\\r\\n      </ion-reorder-group>\\r\\n    </ion-list>\\r\\n   \\r\\n    </div>\\r\\n    <div class=\\\"page-footer\\\">\\r\\n      <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n        <ion-button (click)=\\\"addOffer()\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"small\\\">\\r\\n          Add Offer\\r\\n        </ion-button>\\r\\n      </ion-row>\\r\\n    </div>\\r\\n\\r\\n  \\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { OfferSettingsPage } from './offer-settings.page';\r\nimport { ApplicationDirectivesModule } from 'src/app/directives/application-directives.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OfferSettingsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    ApplicationDirectivesModule\r\n  ],\r\n  declarations: [OfferSettingsPage]\r\n})\r\nexport class OfferSettingsPageModule {}\r\n","module.exports = \".ion-thumbnail {\\n  width: 100%;\\n  height: auto;\\n}\\n\\nion-col.img {\\n  width: 100px;\\n  max-width: 100px;\\n}\\n\\nion-col.name {\\n  width: calc(100% - 310px);\\n  max-width: calc(100% - 300px);\\n}\\n\\nion-col.action {\\n  width: 128px;\\n  max-width: 100px;\\n}\\n\\nion-col.reorder {\\n  width: 75px;\\n  max-width: 75px;\\n}\\n\\n.page-footer {\\n  margin-top: 50px;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWRtaW4vb2ZmZXItc2V0dGluZ3MvQzpcXEJXSS1BRE1JTlNcXFNoZWluLUFkbWluLUNvZGUvc3JjXFxhcHBcXGFkbWluXFxvZmZlci1zZXR0aW5nc1xcb2ZmZXItc2V0dGluZ3MucGFnZS5zY3NzIiwic3JjL2FwcC9hZG1pbi9vZmZlci1zZXR0aW5ncy9vZmZlci1zZXR0aW5ncy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxXQUFBO0VBQ0UsWUFBQTtBQ0NKOztBREVBO0VBQ0UsWUFBQTtFQUNBLGdCQUFBO0FDQ0Y7O0FEQ0E7RUFDRSx5QkFBQTtFQUNBLDZCQUFBO0FDRUY7O0FEQUE7RUFDRSxZQUFBO0VBQ0EsZ0JBQUE7QUNHRjs7QUREQTtFQUNFLFdBQUE7RUFDQSxlQUFBO0FDSUY7O0FEREE7RUFDRSxnQkFBQTtFQUNBLGtCQUFBO0FDSUYiLCJmaWxlIjoic3JjL2FwcC9hZG1pbi9vZmZlci1zZXR0aW5ncy9vZmZlci1zZXR0aW5ncy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW9uLXRodW1ibmFpbHtcclxuICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogYXV0bztcclxufVxyXG5cclxuaW9uLWNvbC5pbWd7XHJcbiAgd2lkdGg6IDEwMHB4O1xyXG4gIG1heC13aWR0aDogMTAwcHg7XHJcbn1cclxuaW9uLWNvbC5uYW1le1xyXG4gIHdpZHRoOiBjYWxjKDEwMCUgLSAzMTBweCk7XHJcbiAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAzMDBweCk7XHJcbn1cclxuaW9uLWNvbC5hY3Rpb257XHJcbiAgd2lkdGg6IDEyOHB4O1xyXG4gIG1heC13aWR0aDogMTAwcHg7XHJcbn1cclxuaW9uLWNvbC5yZW9yZGVye1xyXG4gIHdpZHRoOiA3NXB4O1xyXG4gIG1heC13aWR0aDogNzVweDtcclxufVxyXG5cclxuLnBhZ2UtZm9vdGVye1xyXG4gIG1hcmdpbi10b3A6NTBweDtcclxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn1cclxuXHJcblxyXG5cclxuIiwiLmlvbi10aHVtYm5haWwge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiBhdXRvO1xufVxuXG5pb24tY29sLmltZyB7XG4gIHdpZHRoOiAxMDBweDtcbiAgbWF4LXdpZHRoOiAxMDBweDtcbn1cblxuaW9uLWNvbC5uYW1lIHtcbiAgd2lkdGg6IGNhbGMoMTAwJSAtIDMxMHB4KTtcbiAgbWF4LXdpZHRoOiBjYWxjKDEwMCUgLSAzMDBweCk7XG59XG5cbmlvbi1jb2wuYWN0aW9uIHtcbiAgd2lkdGg6IDEyOHB4O1xuICBtYXgtd2lkdGg6IDEwMHB4O1xufVxuXG5pb24tY29sLnJlb3JkZXIge1xuICB3aWR0aDogNzVweDtcbiAgbWF4LXdpZHRoOiA3NXB4O1xufVxuXG4ucGFnZS1mb290ZXIge1xuICBtYXJnaW4tdG9wOiA1MHB4O1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Events, LoadingController, AlertController, ToastController } from '@ionic/angular';\r\nimport { Router, NavigationExtras } from '@angular/router';\r\nimport { OfferService } from 'src/app/services/offer/offer.service';\r\n\r\n@Component({\r\n  selector: 'app-offer-settings',\r\n  templateUrl: './offer-settings.page.html',\r\n  styleUrls: ['./offer-settings.page.scss'],\r\n})\r\nexport class OfferSettingsPage implements OnInit {\r\n  showLoader: boolean = true;\r\n  allOffers: any = [];\r\n  loading: any;\r\n  constructor(private events: Events,\r\n              private loadingController: LoadingController,\r\n              private alertController: AlertController,\r\n              private toastController: ToastController,\r\n              private router: Router,\r\n              private offerService: OfferService) { }\r\n\r\n  ngOnInit() {\r\n    this.initializeSubscriptions();\r\n    this.events.publish('offer:getOffers');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.removeSubscriptions();\r\n  }\r\n\r\n  initializeSubscriptions() {\r\n    this.events.subscribe('offer:publishOffers', (offers) => {\r\n      this.showLoader = false;\r\n      this.allOffers = offers;\r\n    });\r\n    this.events.subscribe('offer:updateOffersPostionSucess', () => {\r\n      if(this.loading) {\r\n        this.loading.dismiss();\r\n      }\r\n    });\r\n    this.events.subscribe('offer:deleteOfferSucess', () => {\r\n      this.loading.dismiss();\r\n      this.presentAlert('Offer deleted successfully!');\r\n    });\r\n  }\r\n\r\n  addOffer() {\r\n    this.router.navigate(['offer-create']);\r\n  }\r\n\r\n  async onReorderOffers(event: { detail: { from: any; to: any; complete: () => void; }; }) {\r\n    await this.presentLoading('Please wait...', 3000);\r\n    //console.log(`Moving category from ${event.detail.from} to ${event.detail.to}`);\r\n    const start = event.detail.from;\r\n    // tslint:disable-next-line: variable-name\r\n    const id = this.allOffers[start].id;\r\n    //console.log('allOffersLength', this.allOffers.length);\r\n    //console.log('start', start);\r\n    const end = event.detail.to;\r\n    //console.log('end', end);\r\n    if ( start < end && end !== this.allOffers.length - 1) {\r\n      //console.log('from top to mid');\r\n      const firstDate = this.allOffers[end].sortedAt.toDate().getTime();\r\n      const secondDate = this.allOffers[end + 1].sortedAt.toDate().getTime();\r\n      //console.log('fistdate', firstDate);\r\n      //console.log('seconddate', secondDate);\r\n      const changedDate = (firstDate + secondDate) / 2;\r\n      //console.log('finalDate', new Date(changedDate));\r\n      this.offerService.updateOffersPosition(id, new Date(changedDate));\r\n    }\r\n    // tslint:disable-next-line: one-line\r\n    else if (start < end && end === this.allOffers.length - 1) {\r\n      //console.log('from top to bottom');\r\n      const changedDate = this.allOffers[end].sortedAt.toDate().getTime() - 5 * 60000;\r\n      this.offerService.updateOffersPosition(id, new Date(changedDate));\r\n    }\r\n    // tslint:disable-next-line: one-line\r\n    else if (start > end && end !== 0) {\r\n      //console.log('from bottom to mid');\r\n      const firstDate = this.allOffers[end].sortedAt.toDate().getTime();\r\n      const secondDate = this.allOffers[end - 1].sortedAt.toDate().getTime();\r\n      //console.log('fistdate', firstDate);\r\n      //console.log('seconddate', secondDate);\r\n      const changedDate = (firstDate + secondDate) / 2;\r\n      //console.log('finalDate', new Date(changedDate));\r\n      this.offerService.updateOffersPosition(id, new Date(changedDate));\r\n    }\r\n    // tslint:disable-next-line: one-line\r\n    else {\r\n      //console.log('from bottom to top');\r\n      const changedDate = this.allOffers[end].sortedAt.toDate().getTime() + 5 * 60000;\r\n      this.offerService.updateOffersPosition(id, new Date(changedDate));\r\n    }\r\n    const draggedItem = this.allOffers.splice(event.detail.from, 1)[0];\r\n    this.allOffers.splice(event.detail.to, 0, draggedItem);\r\n    event.detail.complete();\r\n  }\r\n\r\n  editOffer(offer: any) {\r\n    const navigationExtras: NavigationExtras = {\r\n      state: {\r\n        offerData: offer\r\n      }\r\n    };\r\n    this.router.navigate(['offer-create'], navigationExtras);\r\n  }\r\n\r\n  async deleteOfferConfirm(oid: string) {\r\n    const alert = await this.alertController.create({\r\n      message: 'Are you sure you want to delete this offer?',\r\n      buttons: [\r\n        {\r\n          text: 'Cancel',\r\n          role: 'cancel',\r\n          cssClass: 'secondary',\r\n          handler: () => {\r\n            //console.log('Confirm Cancel');\r\n          }\r\n        }, {\r\n          text: 'Delete',\r\n          handler: () => {\r\n            //console.log('Confirm Okay');\r\n            this.deleteOffer(oid);\r\n          }\r\n        }\r\n      ]\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n  async deleteOffer(oid: string) {\r\n    await this.presentLoading('Deleting offer...', 5000)\r\n    this.events.publish('offer:deleteOffer', oid);\r\n  }\r\n\r\n  async presentAlert(msg: string) {\r\n    const alert = await this.alertController.create({\r\n      message: msg,\r\n      buttons: [{\r\n        text: 'OK',\r\n        handler: () => {\r\n          this.router.navigate(['offer-settings']);\r\n        }\r\n      }]\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async presentLoading(msg: string, duration: number) {\r\n    this.loading = await this.loadingController.create({\r\n      message: msg,\r\n      duration: duration\r\n    });\r\n    await this.loading.present();\r\n  }\r\n\r\n  removeSubscriptions() {\r\n    this.events.unsubscribe('offer:publishOffers');\r\n    this.events.unsubscribe('offer:updateOffersPostionSucess');\r\n    this.events.unsubscribe('offer:deleteOfferSucess');\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}