{"version":3,"sources":["./src/app/services/categories/categories.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAA2C;AACgB;AACA;AACtB;AACoB;AAKzD,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAE5B,YACU,GAAqB,EACrB,SAA6B,EAC7B,aAA4B;QAF5B,QAAG,GAAH,GAAG,CAAkB;QACrB,cAAS,GAAT,SAAS,CAAoB;QAC7B,kBAAa,GAAb,aAAa,CAAe;IAClC,CAAC;IAGL,8BAA8B;IAExB,8BAA8B,CAAC,aAAkB;;YACrD,+CAA+C;YAC/C,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,IAAI,WAAW,GAAG,EAAE,CAAC;oBACrB,MAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,YAAY,EAAE,gBAAgB,EAAE,aAAa,CAAC,CAAC,CAAC;oBAChJ,UAAU,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,aAAkB,EAAE,EAAE;wBAChD,aAAa,CAAC,OAAO,CAAC,CAAC,GAAQ,EAAE,EAAE;4BACjC,WAAW,CAAC,IAAI,iBAAG,EAAE,EAAE,GAAG,CAAC,EAAE,IAAK,GAAG,CAAC,IAAI,EAAE,EAAG,CAAC;wBAClD,CAAC,CAAC,CAAC;wBACH,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;4BAC5B,OAAO,CAAC,WAAW,CAAC,CAAC;yBACtB;6BAAM;4BACL,OAAO,CAAC,KAAK,CAAC,CAAC;yBAChB;oBACH,CAAC,CAAC,CAAC;iBACJ;gBAAC,OAAO,GAAG,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBAC1B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,mBAAmB,CAAC,IAAI,EAAE,aAAkB,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ;;YACzE,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,IAAI,CAAC,UAAU,CAAC,GAAG,kDAAkB,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;oBACnE,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;wBAC9B,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,EAAE,gCAAgC,EAAE,CAAC;qBAC3D;oBACD,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAC9J,IAAI,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;wBAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBACxE,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,KAAK,UAAU,cAAc,CAAC,EAAE,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,CAAC;wBACxI,MAAM,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;qBAC9D;oBACD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;wBACvB,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBACjE,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,2BAA2B,KAAK,WAAW,cAAc,CAAC,EAAE,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,CAAC;wBAC/I,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;qBACvD;oBACD,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,GAAG,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBAC1B;YACH,CAAC,EAAC;QAEJ,CAAC;KAAA;IAEK,qBAAqB,CAAC,KAAK,EAAE,QAAQ;;YACzC,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,IAAI,IAAI,GAAG,EAAE,CAAC;oBACd,MAAM,gBAAgB,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE,CAChJ,GAAG,CAAC,OAAO,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,CAAC;oBACnC,gBAAgB,CAAC,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,QAAQ,EAAE,EAAE;wBAC5C,QAAQ,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;4BACvB,IAAI,CAAC,IAAI,iBAAG,EAAE,EAAE,GAAG,CAAC,EAAE,IAAK,GAAG,CAAC,IAAI,EAAE,EAAG,CAAC;wBAC3C,CAAC,CAAC;wBACF,sCAAsC;wBACtC,OAAO,CAAC,IAAI,CAAC,CAAC;oBAChB,CAAC,CAAC;iBACH;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;iBAC5B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,8BAA8B,CAAC,MAAM,EAAE,KAAK,EAAE,QAAQ;;YAC1D,kDAAkD;YAClD,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC;wBAClG,eAAe,EAAE,MAAM;qBACxB,CAAC,CAAC;oBACH,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;iBAC5B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,4BAA4B,CAAC,KAAK,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM;;YACvE,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC;yBACzF,UAAU,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC;wBACzD,MAAM,EAAE,MAAM;qBACf,CAAC,CAAC;oBACL,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;iBAC5B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,oBAAoB,CAAC,IAAI,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,aAAa;;YAC5E,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;wBACd,IAAI,CAAC,IAAI,GAAG,IAAI;qBACjB;oBACD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;wBAChB,IAAI,CAAC,MAAM,GAAG,IAAI;qBACnB;oBACD,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;wBACf,IAAI,CAAC,KAAK,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE;qBAC3B;oBACD,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;wBAChB,IAAI,CAAC,MAAM,GAAG,IAAI;qBACnB;oBACD,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;wBACrB,IAAI,CAAC,WAAW,GAAG,IAAI;qBACxB;oBACD,IAAI,OAAO,GAAG;wBACZ,IAAI,EAAE,IAAI,CAAC,IAAI;wBACf,MAAM,EAAE,IAAI,CAAC,MAAM;wBACnB,KAAK,EAAE,IAAI,CAAC,KAAK;wBACjB,MAAM,EAAE,IAAI,CAAC,MAAM;wBACnB,WAAW,EAAE,IAAI,CAAC,WAAW;wBAC7B,WAAW,EAAE,IAAI,CAAC,WAAW;qBAC9B;oBACD,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC;yBAChH,UAAU,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;oBACtE,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;wBACtB,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBAChE,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,KAAK,IAAI,QAAQ,UAAU,aAAa,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,CAAC;wBAChJ,MAAM,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;qBACtD;oBACD,IAAI,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;wBACvB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;wBACnB,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;wBACjE,MAAM,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,qBAAqB,KAAK,IAAI,QAAQ,WAAW,aAAa,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC,QAAQ,EAAE,GAAG,OAAO,CAAC,CAAC;wBACjJ,MAAM,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;qBACvD;oBACD,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,GAAG,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBAC1B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,sBAAsB,CAAC,KAAa,EAAE,QAAgB,EAAE,aAAqB;;YACjF,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC;yBACzF,UAAU,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,MAAM,EAAE,CAAC;oBAC/D,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,KAAK,EAAE;oBACd,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;iBAC5B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAEK,gCAAgC,CAAC,aAAqB,EAAE,WAAgB,EAAE,QAAQ,EAAE,KAAK;;YAC7F,qFAAqF;YAErF,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC;yBACzF,UAAU,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC,CAAC;oBAExF,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,GAAG,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBAC1B;YACH,CAAC,EAAC;QACJ,CAAC;KAAA;IAED,4BAA4B;IAE5B,gEAAgE;IAC1D,kCAAkC,CAAC,KAAU,EAAE,QAAa;;YAChE,gCAAgC;YAChC,OAAO,IAAI,OAAO,CAAC,CAAO,OAAO,EAAE,EAAE,CAAC;gBACpC,IAAI;oBACF,MAAM,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,EAAE,YAAY,EAAE,QAAQ,EAAE,CAAC,CAAC;oBACtF,OAAO,CAAC,IAAI,CAAC,CAAC;iBACf;gBAAC,OAAO,GAAG,EAAE;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC;oBACf,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;iBAC1B;YACH,CAAC,EAAC,CAAC;QACL,CAAC;KAAA;CAEF;;YAxMgB,wEAAgB;YACV,wEAAkB;YACd,oEAAa;;AAL3B,iBAAiB;IAH7B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;2EAIe,wEAAgB;QACV,wEAAkB;QACd,oEAAa;GAL3B,iBAAiB,CA2M7B;AA3M6B","file":"default~admin-add-sub-subcategories-add-sub-subcategories-module~admin-admin-categories-admin-catego~aaf80eea-es2015.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport * as firebase from 'firebase';\r\nimport { SharedService } from '../shared/shared.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CategoriesService {\r\n\r\n  constructor(\r\n    private afs: AngularFirestore,\r\n    private fbStorage: AngularFireStorage,\r\n    private sharedService: SharedService\r\n  ) { }\r\n\r\n\r\n  // ? Sub Of Sub-Category Start\r\n\r\n  async getProductsForSubOfSubCategory(subOfSubCatId: any) {\r\n    // console.log('subOfSubCatId', subOfSubCatId);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        let allProducts = [];\r\n        const productRef = this.afs.collection('products', ref => ref.orderBy('sortedAt', 'desc').where(\"categories\", \"array-contains\", subOfSubCatId));\r\n        productRef.get().subscribe((querySnapshot: any) => {\r\n          querySnapshot.forEach((doc: any) => {\r\n            allProducts.push({ id: doc.id, ...doc.data() });\r\n          });\r\n          if (allProducts.length !== 0) {\r\n            resolve(allProducts);\r\n          } else {\r\n            resolve(false);\r\n          }\r\n        });\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  async addSubOfSubCategory(data, categoryImage: any, catId, banner, subCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        data['sortedAt'] = firebase.firestore.FieldValue.serverTimestamp();\r\n        if (categoryImage.length === 0) {\r\n          data['image'] = { url: 'assets/img/placeholder-img.jpg' };\r\n        }\r\n        const subcategoryDoc = await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).collection('sub-subcategories').add(data);\r\n        if (categoryImage.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(categoryImage[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/image/${subcategoryDoc.id}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(categoryImage[0].imgData, 'data_url');\r\n        }\r\n        if (banner.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(banner[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategoriesBanner/${catId}/banner/${subcategoryDoc.id}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(banner[0].imgData, 'data_url');\r\n        }\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  async getSubOfSubCategories(catId, subCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        let data = [];\r\n        const subcategoriesRef = this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).collection('subcategories', ref =>\r\n          ref.orderBy('sortedAt', 'desc'));\r\n        subcategoriesRef.get().subscribe((snapShot) => {\r\n          snapShot.forEach((doc) => {\r\n            data.push({ id: doc.id, ...doc.data() });\r\n          })\r\n          // console.log('subOfSubData:', data);\r\n          resolve(data);\r\n        })\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async changeSubOfSubCategoriesStatus(status, catId, subCatId) {\r\n    // console.log('change', catId, subCatId, status);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).update({\r\n          isSubcategories: status\r\n        });\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async changeSubOfSubCategoryStatus(catId, subcatId, subOfSubCatId, status) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update({\r\n            status: status\r\n          });\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async editSubOfSubCategory(data, image, banner, catId, subcatId, subOfSubCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        if (!data.name) {\r\n          data.name = null\r\n        }\r\n        if (!data.status) {\r\n          data.status = null\r\n        }\r\n        if (!data.image) {\r\n          data.image = { url: null }\r\n        }\r\n        if (!data.banner) {\r\n          data.banner = null\r\n        }\r\n        if (!data.description) {\r\n          data.description = null\r\n        }\r\n        let dataObj = {\r\n          name: data.name,\r\n          status: data.status,\r\n          image: data.image,\r\n          banner: data.banner,\r\n          isExclusive: data.isExclusive,\r\n          description: data.description\r\n        }\r\n        const subcategoryDoc = await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update(dataObj);\r\n        if (image.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(image[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/${subcatId}/image/${subOfSubCatId}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(image[0].imgData, 'data_url');\r\n        }\r\n        if (banner.length !== 0) {\r\n          console.log('here')\r\n          let imgType = this.sharedService.getImageType(banner[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/${subcatId}/banner/${subOfSubCatId}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(banner[0].imgData, 'data_url');\r\n        }\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  async deleteSubOfSubCategory(catId: string, subcatId: string, subOfSubCatId: string) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).delete();\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async updateSubOfSubCategoriesPosition(subOfSubCatId: string, changedDate: any, subCatId, catId) {\r\n    // console.log('subOfSubCatId', subOfSubCatId, 'catId', catId, 'subcatId', subCatId);\r\n\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update({ sortedAt: changedDate });\r\n\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  // ? Sub Of Sub-Category End\r\n\r\n  // ? Update GstExclusive for category products in category page.\r\n  async updateGstExclusiveCategoryProducts(catId: any, gstValue: any) {\r\n    // console.log(catId, gstValue);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection(\"categories\").doc(catId).update({ gstExclusive: gstValue });\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}