{"version":3,"sources":["./src/app/product-reviews/product-reviews.page.html","./src/app/product-reviews/product-reviews.module.ts","./src/app/product-reviews/product-reviews.page.scss","./src/app/product-reviews/product-reviews.page.ts"],"names":[],"mappings":"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","file":"product-reviews-product-reviews-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-menu-button slot=\\\"start\\\" class=\\\"menu-btn\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\r\\n    </ion-menu-button>\\r\\n    <div class=\\\"header-logo\\\" slot=\\\"start\\\"><img src=\\\"../../../assets/img/shop-logo.png\\\"></div>\\r\\n    <ion-title text-center>Product Review Management</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"main-container fixed-height\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <div>\\r\\n            <ion-grid class=\\\"ion-no-padding data-table ion-text-center\\\" *ngIf=\\\"products.length\\\">\\r\\n              <ion-row class=\\\"ion-text-capitalize\\\">\\r\\n                <ion-col size=\\\"4\\\">Product</ion-col>\\r\\n                <ion-col size=\\\"8\\\">Reviews</ion-col>\\r\\n              </ion-row>\\r\\n\\r\\n              <ion-row *ngFor=\\\"let product of products; let i=index;\\\">\\r\\n                <ng-container *ngIf=\\\"product.ratings.length\\\">\\r\\n                  <ion-col size=\\\"4\\\" class=\\\"vertical-center\\\">\\r\\n                    <div class=\\\"vertical-center\\\">\\r\\n                      <ion-thumbnail style=\\\"margin-right: 20px;\\\" class=\\\"thumbnail\\\">\\r\\n                        <img class=\\\"loading\\\" *ngIf=\\\"product.coverPic\\\"\\r\\n                          src=\\\"{{product.coverPic.thumb}}\\\">\\r\\n                      </ion-thumbnail>\\r\\n                      {{product.prodName}}\\r\\n                    </div>\\r\\n                  </ion-col>\\r\\n                  <ion-col size=\\\"8\\\" class=\\\"t-a-l\\\">\\r\\n                    <ng-container *ngFor=\\\"let rating of product.ratings; let j=index\\\">\\r\\n                      <div style=\\\"display: flex; padding-left: 10px;\\\">\\r\\n                        <div style=\\\"width: 80%;\\\">\\r\\n                          <h6><b>{{rating.userName}}</b></h6>\\r\\n                          <ionic4-star-rating activeIcon=\\\"ios-star\\\" defaultIcon=\\\"ios-star-outline\\\"\\r\\n                            [activeColor]=\\\"getStarColor(rating.rating)\\\" defaultColor=\\\"#e1e1e1\\\" readonly=\\\"true\\\"\\r\\n                            [rating]=\\\"rating.rating\\\" fontSize=\\\"15px\\\" halfStar='true'>\\r\\n                          </ionic4-star-rating>\\r\\n                          <p class=\\\"user-rating-review\\\">{{rating.review}}</p>\\r\\n                          <div class=\\\"user-rating-photos\\\" *ngIf=\\\"rating.photos && rating.photos.length\\\">\\r\\n                            <ion-img [src]=\\\"photo.thumb\\\" *ngFor=\\\"let photo of rating.photos; let k=index;\\\"\\r\\n                              (click)=\\\"imageZoom(rating.photos, k)\\\"></ion-img>\\r\\n                          </div>\\r\\n                          <p class=\\\"user-rating-date\\\">Rated On {{rating.createdAt.toDate() | date:'dd MMMM yyyy'}}</p>\\r\\n                        </div>\\r\\n    \\r\\n                        <div style=\\\"width: 20%;\\\" class=\\\"vertical-center\\\">\\r\\n                          <ng-container *ngIf=\\\"rating.status === 'approved'\\\"><b class=\\\"green\\\">Approved</b></ng-container>\\r\\n                          <ng-container *ngIf=\\\"rating.status !== 'approved'\\\">\\r\\n                            <ion-button (click)=\\\"approve(product.id, rating.id, i,j)\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"small\\\">\\r\\n                              Approve\\r\\n                            </ion-button>\\r\\n                          </ng-container>\\r\\n                        </div>\\r\\n                      </div>\\r\\n                      <hr class=\\\"line\\\" *ngIf=\\\"product.ratings.length - 1 !== j\\\">\\r\\n                    </ng-container>\\r\\n                  </ion-col>\\r\\n                </ng-container>\\r\\n              </ion-row>\\r\\n            </ion-grid>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n</ion-content>\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ProductReviewsPage } from './product-reviews.page';\r\nimport { StarRatingModule } from 'ionic4-star-rating';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductReviewsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    StarRatingModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [ProductReviewsPage]\r\n})\r\nexport class ProductReviewsPageModule {}\r\n","module.exports = \".green {\\n  color: var(--ion-color-success);\\n}\\n\\nh6 {\\n  margin-top: 0px;\\n}\\n\\n.data-table ion-col {\\n  border: 1px solid gray;\\n  padding-top: 10px;\\n  padding-bottom: 10px;\\n}\\n\\n.data-table ion-row:first-child {\\n  background: lightgray;\\n}\\n\\n.user-rating-photos ion-img {\\n  cursor: pointer;\\n  width: 100px;\\n  height: 100px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcHJvZHVjdC1yZXZpZXdzL0M6XFxCV0ktQURNSU5TXFxTaGVpbi1BZG1pbi1Db2RlL3NyY1xcYXBwXFxwcm9kdWN0LXJldmlld3NcXHByb2R1Y3QtcmV2aWV3cy5wYWdlLnNjc3MiLCJzcmMvYXBwL3Byb2R1Y3QtcmV2aWV3cy9wcm9kdWN0LXJldmlld3MucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksK0JBQUE7QUNDSjs7QURDQTtFQUNFLGVBQUE7QUNFRjs7QURDSTtFQUNBLHNCQUFBO0VBQ0EsaUJBQUE7RUFDQSxvQkFBQTtBQ0VKOztBRENFO0VBQ0UscUJBQUE7QUNDSjs7QURHRTtFQUNFLGVBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtBQ0FKIiwiZmlsZSI6InNyYy9hcHAvcHJvZHVjdC1yZXZpZXdzL3Byb2R1Y3QtcmV2aWV3cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuZ3JlZW57XHJcbiAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXN1Y2Nlc3MpO1xyXG59XHJcbmg2e1xyXG4gIG1hcmdpbi10b3A6IDBweDtcclxufVxyXG4uZGF0YS10YWJsZXsgIFxyXG4gICAgaW9uLWNvbHtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XHJcbiAgICBwYWRkaW5nLXRvcDogMTBweDtcclxuICAgIHBhZGRpbmctYm90dG9tOiAxMHB4XHJcbiAgfVxyXG4gIFxyXG4gIGlvbi1yb3c6Zmlyc3QtY2hpbGR7XHJcbiAgICBiYWNrZ3JvdW5kOiBsaWdodGdyYXlcclxuICB9XHJcbn1cclxuLnVzZXItcmF0aW5nLXBob3Rvc3tcclxuICBpb24taW1ne1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgd2lkdGg6IDEwMHB4O1xyXG4gICAgaGVpZ2h0OiAxMDBweDtcclxuICB9XHJcbn0iLCIuZ3JlZW4ge1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXN1Y2Nlc3MpO1xufVxuXG5oNiB7XG4gIG1hcmdpbi10b3A6IDBweDtcbn1cblxuLmRhdGEtdGFibGUgaW9uLWNvbCB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGdyYXk7XG4gIHBhZGRpbmctdG9wOiAxMHB4O1xuICBwYWRkaW5nLWJvdHRvbTogMTBweDtcbn1cbi5kYXRhLXRhYmxlIGlvbi1yb3c6Zmlyc3QtY2hpbGQge1xuICBiYWNrZ3JvdW5kOiBsaWdodGdyYXk7XG59XG5cbi51c2VyLXJhdGluZy1waG90b3MgaW9uLWltZyB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgd2lkdGg6IDEwMHB4O1xuICBoZWlnaHQ6IDEwMHB4O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { ImageModalPage } from '../image-modal/image-modal.page';\r\nimport { ProductService } from '../services/product/product.service';\r\nimport { SharedService } from '../services/shared/shared.service';\r\nimport { ProductReviewPage } from './product-review/product-review.page';\r\n\r\n@Component({\r\n  selector: 'app-product-reviews',\r\n  templateUrl: './product-reviews.page.html',\r\n  styleUrls: ['./product-reviews.page.scss'],\r\n})\r\nexport class ProductReviewsPage implements OnInit {\r\n\r\n  products = [];\r\n\r\n  constructor(\r\n    private productService: ProductService,\r\n    private modalController: ModalController,\r\n    private sharedService: SharedService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.initializeSubscriptions();\r\n  }\r\n\r\n  async initializeSubscriptions() {\r\n    await this.sharedService.presentLoading('Please Wait...',10000);\r\n    let products:any = await this.productService.getProductsWithRating();\r\n    for (const product of products) {\r\n      let ratings:any = await this.productService.getRatings(product.id);\r\n      //  && product.rating && Object.keys(product.rating).length\r\n      if (ratings.length) {\r\n        product.ratings = ratings;\r\n        console.log('product:::', product);\r\n      } else{\r\n        product.ratings = []\r\n      }\r\n    }\r\n    this.products = products;\r\n    console.log('productsWithRating:', products);\r\n    if (this.sharedService.loading) {\r\n      console.log('dismiss');\r\n      this.sharedService.loading.dismiss();\r\n    }\r\n  }\r\n\r\n  getStarColor(rating) {\r\n    if (rating >= 3) {\r\n        return '#20c020';\r\n    } else if (rating < 3 && rating >= 2) {\r\n        return '#FF9F00';\r\n    } else {\r\n        return '#ff6161';\r\n    }\r\n}\r\n\r\n  // async viewReview(prodIndex, ratingIndex){\r\n  //   const modal = await this.modalController.create({\r\n  //   component: ProductReviewPage,\r\n  //   cssClass:'custom-modal',\r\n  //   showBackdrop: true,\r\n  //   backdropDismiss: false,\r\n  //   componentProps: { ratingDetails: this.products[prodIndex].ratings[ratingIndex] }\r\n  //   });\r\n  //   modal.onDidDismiss()\r\n  //   .then((res) => {\r\n  //     console.log('data from modal', res);\r\n  //     if(res.data) {\r\n  //       if (res.data.approved) {\r\n  //         this.approve(prodIndex, ratingIndex);\r\n  //       }\r\n  //     }\r\n  // });\r\n  //   await modal.present();\r\n  // }\r\n\r\n  async approve(prodIndex, ratingIndex, i,j){\r\n   let approved =  await this.productService.updateRating(prodIndex, ratingIndex, {status: 'approved'});\r\n   if (approved) {\r\n    this.products[i].ratings[j].status = 'approved';\r\n   }\r\n  }\r\n  \r\n  imageZoom(images: any, index: number) {\r\n      this.modalController.create({\r\n          component: ImageModalPage,\r\n          cssClass: 'photo-modal-class',\r\n          componentProps: {\r\n              imgs: images,\r\n              index: index\r\n          }\r\n      }).then(modal => modal.present());\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}