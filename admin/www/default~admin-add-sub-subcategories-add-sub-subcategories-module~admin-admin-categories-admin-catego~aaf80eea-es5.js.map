{"version":3,"sources":["./src/app/services/categories/categories.service.ts"],"names":[],"mappings":"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","file":"default~admin-add-sub-subcategories-add-sub-subcategories-module~admin-admin-categories-admin-catego~aaf80eea-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport * as firebase from 'firebase';\r\nimport { SharedService } from '../shared/shared.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CategoriesService {\r\n\r\n  constructor(\r\n    private afs: AngularFirestore,\r\n    private fbStorage: AngularFireStorage,\r\n    private sharedService: SharedService\r\n  ) { }\r\n\r\n\r\n  // ? Sub Of Sub-Category Start\r\n\r\n  async getProductsForSubOfSubCategory(subOfSubCatId: any) {\r\n    // console.log('subOfSubCatId', subOfSubCatId);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        let allProducts = [];\r\n        const productRef = this.afs.collection('products', ref => ref.orderBy('sortedAt', 'desc').where(\"categories\", \"array-contains\", subOfSubCatId));\r\n        productRef.get().subscribe((querySnapshot: any) => {\r\n          querySnapshot.forEach((doc: any) => {\r\n            allProducts.push({ id: doc.id, ...doc.data() });\r\n          });\r\n          if (allProducts.length !== 0) {\r\n            resolve(allProducts);\r\n          } else {\r\n            resolve(false);\r\n          }\r\n        });\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  async addSubOfSubCategory(data, categoryImage: any, catId, banner, subCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        data['sortedAt'] = firebase.firestore.FieldValue.serverTimestamp();\r\n        if (categoryImage.length === 0) {\r\n          data['image'] = { url: 'assets/img/placeholder-img.jpg' };\r\n        }\r\n        const subcategoryDoc = await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).collection('sub-subcategories').add(data);\r\n        if (categoryImage.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(categoryImage[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/image/${subcategoryDoc.id}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(categoryImage[0].imgData, 'data_url');\r\n        }\r\n        if (banner.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(banner[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategoriesBanner/${catId}/banner/${subcategoryDoc.id}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(banner[0].imgData, 'data_url');\r\n        }\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n  async getSubOfSubCategories(catId, subCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        let data = [];\r\n        const subcategoriesRef = this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).collection('subcategories', ref =>\r\n          ref.orderBy('sortedAt', 'desc'));\r\n        subcategoriesRef.get().subscribe((snapShot) => {\r\n          snapShot.forEach((doc) => {\r\n            data.push({ id: doc.id, ...doc.data() });\r\n          })\r\n          // console.log('subOfSubData:', data);\r\n          resolve(data);\r\n        })\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async changeSubOfSubCategoriesStatus(status, catId, subCatId) {\r\n    // console.log('change', catId, subCatId, status);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId).update({\r\n          isSubcategories: status\r\n        });\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async changeSubOfSubCategoryStatus(catId, subcatId, subOfSubCatId, status) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update({\r\n            status: status\r\n          });\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async editSubOfSubCategory(data, image, banner, catId, subcatId, subOfSubCatId) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        if (!data.name) {\r\n          data.name = null\r\n        }\r\n        if (!data.status) {\r\n          data.status = null\r\n        }\r\n        if (!data.image) {\r\n          data.image = { url: null }\r\n        }\r\n        if (!data.banner) {\r\n          data.banner = null\r\n        }\r\n        if (!data.description) {\r\n          data.description = null\r\n        }\r\n        let dataObj = {\r\n          name: data.name,\r\n          status: data.status,\r\n          image: data.image,\r\n          banner: data.banner,\r\n          isExclusive: data.isExclusive,\r\n          description: data.description\r\n        }\r\n        const subcategoryDoc = await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update(dataObj);\r\n        if (image.length !== 0) {\r\n          let imgType = this.sharedService.getImageType(image[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/${subcatId}/image/${subOfSubCatId}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(image[0].imgData, 'data_url');\r\n        }\r\n        if (banner.length !== 0) {\r\n          console.log('here')\r\n          let imgType = this.sharedService.getImageType(banner[0].imgData);\r\n          const imgRef = this.fbStorage.ref(`sub-subcategories/${catId}/${subcatId}/banner/${subOfSubCatId}/` + new Date().getTime().toString() + imgType);\r\n          await imgRef.putString(banner[0].imgData, 'data_url');\r\n        }\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  async deleteSubOfSubCategory(catId: string, subcatId: string, subOfSubCatId: string) {\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subcatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).delete();\r\n        resolve(true);\r\n      } catch (error) {\r\n        resolve(false);\r\n        console.log('err:', error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async updateSubOfSubCategoriesPosition(subOfSubCatId: string, changedDate: any, subCatId, catId) {\r\n    // console.log('subOfSubCatId', subOfSubCatId, 'catId', catId, 'subcatId', subCatId);\r\n\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection('categories').doc(catId).collection('subcategories').doc(subCatId)\r\n          .collection('sub-subcategories').doc(subOfSubCatId).update({ sortedAt: changedDate });\r\n\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    })\r\n  }\r\n\r\n  // ? Sub Of Sub-Category End\r\n\r\n  // ? Update GstExclusive for category products in category page.\r\n  async updateGstExclusiveCategoryProducts(catId: any, gstValue: any) {\r\n    // console.log(catId, gstValue);\r\n    return new Promise(async (resolve) => {\r\n      try {\r\n        await this.afs.collection(\"categories\").doc(catId).update({ gstExclusive: gstValue });\r\n        resolve(true);\r\n      } catch (err) {\r\n        resolve(false);\r\n        console.log('err:', err);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}