{"version":3,"sources":["./src/app/admin/form-submissions/form-submissions.page.html","./src/app/admin/form-submissions/form-submissions.module.ts","./src/app/admin/form-submissions/form-submissions.page.scss","./src/app/admin/form-submissions/form-submissions.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,ugBAAugB,cAAc,iBAAiB,sGAAsG,aAAa,0DAA0D,qBAAqB,+BAA+B,0CAA0C,8BAA8B,KAAK,qBAAqB,MAAM,iFAAiF,eAAe,UAAU,MAAM,sFAAsF,kBAAkB,UAAU,MAAM,iGAAiG,yBAAyB,gXAAgX,aAAa,wCAAwC,gBAAgB,uGAAuG,kBAAkB,gHAAgH,kBAAkB,uJ;;;;;;;;;;;;;;;;;;;;;;ACAx1D;AACM;AACF;AACU;AAEV;AAEiB;AAE9D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,0EAAmB;KAC/B;CACF,CAAC;AAWF,IAAa,yBAAyB,GAAtC,MAAa,yBAAyB;CAAG;AAA5B,yBAAyB;IATrC,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;SAC9B;QACD,YAAY,EAAE,CAAC,0EAAmB,CAAC;KACpC,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;ACzBtC,2BAA2B,2BAA2B,sBAAsB,yBAAyB,GAAG,gBAAgB,kBAAkB,uBAAuB,GAAG,6CAA6C,+8B;;;;;;;;;;;;;;;;;;;;ACA/J;AACS;AACf;AAC2B;AAOvE,IAAa,mBAAmB,GAAhC,MAAa,mBAAmB;IAO9B,YAAoB,gBAAkC,EAAU,aAA4B;QAAxE,qBAAgB,GAAhB,gBAAgB,CAAkB;QAAU,kBAAa,GAAb,aAAa,CAAe;QAL5F,aAAQ,GAAO,EAAE;QACjB,YAAO,GAAG,KAAK;QACf,UAAK,GAAG,EAAE;QACV,eAAU,GAAG,EAAE;IAEiF,CAAC;IAEjG,QAAQ;IACR,CAAC;IAEK,gBAAgB;;YACpB,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,WAAW,EAAE,MAAM,CAAC,CAAC,CAAC;YACnG,MAAM,QAAQ,GAAG,OAAO,CAAC,eAAe,EAAE,CAAC,IAAI,CAC3C,0DAAG,CAAC,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;gBAC3B,MAAM,IAAI,GAAQ,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;gBACvC,MAAM,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC;gBAC5B,uBAAS,EAAE,IAAK,IAAI,EAAG;YAC3B,CAAC,CAAC,CAAC,CACN,CAAC;YACF,MAAM,cAAc,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,4DAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC;YAChE,4BAA4B;YAC5B,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE;gBACxB,IAAI,CAAC,OAAO,GAAG,IAAI;aACtB;iBAAM;gBACH,IAAI,CAAC,QAAQ,GAAG,cAAc;gBAC9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBAC7C,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,EAAC;wBAC1B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,4DAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC;qBACpJ;oBACD,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,EAC7B;wBACE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,4DAAK,EAAE,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC;qBAC7J;iBACF;aACJ;QAEH,CAAC;KAAA;IAED,cAAc,CAAC,MAAM;QACnB,IAAI,GAAG,CAAC;QAER,IAAI;YACF,GAAG,GAAG,IAAI,GAAG,CAAC,MAAM,CAAC,CAAC;SACvB;QAAC,OAAO,CAAC,EAAE;YACV,OAAO,KAAK,CAAC;SACd;QAED,OAAO,GAAG,CAAC,QAAQ,KAAK,OAAO,IAAI,GAAG,CAAC,QAAQ,KAAK,QAAQ,CAAC;IAC/D,CAAC;IAEK,UAAU,CAAC,CAAC;;YAChB,MAAM,IAAI,CAAC,aAAa,CAAC,cAAc,EAAE;YACzC,MAAM,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE;YACjF,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC;YACzB,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,OAAO,EAAE;YACpC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,4BAA4B,CAAC;QAE/D,CAAC;KAAA;CAIF;;YAxDuC,wEAAgB;YAAyB,oFAAa;;AAPjF,mBAAmB;IAL/B,+DAAS,CAAC;QACT,QAAQ,EAAE,sBAAsB;QAChC,8KAA2C;;KAE5C,CAAC;2EAQsC,wEAAgB,EAAyB,oFAAa;GAPjF,mBAAmB,CA+D/B;AA/D+B","file":"admin-form-submissions-form-submissions-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-menu-button slot=\\\"start\\\" class=\\\"menu-btn\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\r\\n    </ion-menu-button>\\r\\n    <div class=\\\"header-logo\\\" slot=\\\"start\\\"><img src=\\\"../../../assets/img/shop-logo.png\\\"></div>\\r\\n    <ion-title text-center>Form Submissions</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"main-container\\\">\\r\\n  <p *ngIf='noForms' style=\\\"text-align: center;padding: 20px;font-size: large;\\\">No submissions yet!</p>\\r\\n  <div *ngIf='!noForms'>\\r\\n    <ion-grid *ngFor=\\\"let form of allForms; let i=index;\\\" class='dataTable'>\\r\\n      <div style=\\\"display: flex; align-items: center;justify-content: space-between;\\\">\\r\\n        <div style=\\\"display: flex;\\\">\\r\\n          <p><strong>{{i+1}} )</strong></p>&nbsp;&nbsp;\\r\\n          <p *ngIf='users[i] && users[i].name'><strong>User Name:</strong> {{users[i].name}}</p>&nbsp;&nbsp;\\r\\n          <p *ngIf='users[i] && users[i].phoneNo'><strong>User Number:</strong> {{users[i].phoneNo}}</p>&nbsp;&nbsp;\\r\\n          <p *ngIf='formTitles[i] && formTitles[i].formTitle'><strong>Form Title:</strong> {{formTitles[i].formTitle}}</p>\\r\\n        </div>\\r\\n        <ion-button (click) = \\\"deleteForm(i)\\\" >Delete</ion-button>\\r\\n      </div>\\r\\n      <br>\\r\\n      <ion-row class=\\\"ion-text-capitalize\\\" style=\\\"background: lightgray\\\">\\r\\n        <ion-col>Field</ion-col>\\r\\n        <ion-col>Value</ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row *ngFor=\\\"let submission of form.formData | keyvalue; let i=index;\\\">\\r\\n        <ion-col>\\r\\n          {{submission.key}}\\r\\n        </ion-col>\\r\\n        <ion-col *ngIf=\\\"!isValidHttpUrl(submission.value)\\\">\\r\\n          {{submission.value}}\\r\\n        </ion-col>\\r\\n        <ion-col *ngIf=\\\"isValidHttpUrl(submission.value)\\\">\\r\\n          <a href=\\\"{{submission.value}}\\\" target=\\\"_blank\\\">View Uploaded File</a>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FormSubmissionsPage } from './form-submissions.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FormSubmissionsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [FormSubmissionsPage]\r\n})\r\nexport class FormSubmissionsPageModule {}\r\n","module.exports = \"ion-col {\\n  border: 1px solid gray;\\n  padding-top: 10px;\\n  padding-bottom: 10px;\\n}\\n\\n.dataTable {\\n  padding: 20px;\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWRtaW4vZm9ybS1zdWJtaXNzaW9ucy9DOlxcQldJLUFETUlOU1xcU2hlaW4tQWRtaW4tQ29kZS9zcmNcXGFwcFxcYWRtaW5cXGZvcm0tc3VibWlzc2lvbnNcXGZvcm0tc3VibWlzc2lvbnMucGFnZS5zY3NzIiwic3JjL2FwcC9hZG1pbi9mb3JtLXN1Ym1pc3Npb25zL2Zvcm0tc3VibWlzc2lvbnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksc0JBQUE7RUFDQSxpQkFBQTtFQUNBLG9CQUFBO0FDQ0o7O0FERUE7RUFDSSxhQUFBO0VBQ0Esa0JBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL2FkbWluL2Zvcm0tc3VibWlzc2lvbnMvZm9ybS1zdWJtaXNzaW9ucy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJpb24tY29se1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcclxuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xyXG4gICAgcGFkZGluZy1ib3R0b206IDEwcHhcclxufVxyXG5cclxuLmRhdGFUYWJsZXtcclxuICAgIHBhZGRpbmc6IDIwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbn0iLCJpb24tY29sIHtcbiAgYm9yZGVyOiAxcHggc29saWQgZ3JheTtcbiAgcGFkZGluZy10b3A6IDEwcHg7XG4gIHBhZGRpbmctYm90dG9tOiAxMHB4O1xufVxuXG4uZGF0YVRhYmxlIHtcbiAgcGFkZGluZzogMjBweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { map, first } from 'rxjs/operators';\r\nimport { SharedService } from 'src/app/services/shared/shared.service';\r\n\r\n@Component({\r\n  selector: 'app-form-submissions',\r\n  templateUrl: './form-submissions.page.html',\r\n  styleUrls: ['./form-submissions.page.scss'],\r\n})\r\nexport class FormSubmissionsPage implements OnInit {\r\n\r\n  allForms:any = []\r\n  noForms = false\r\n  users = []\r\n  formTitles = []\r\n\r\n  constructor(private angularFirestore: AngularFirestore, private sharedService: SharedService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    const formRef = this.angularFirestore.collection('forms', ref => ref.orderBy('createdAt', 'desc'));\r\n    const formSnap = formRef.snapshotChanges().pipe(\r\n        map(actions => actions.map(a => {\r\n            const data: any = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n        }))\r\n    );\r\n    const submissionData = await formSnap.pipe(first()).toPromise();\r\n    // console.log(catgeoryData)\r\n    if (!submissionData.length) {\r\n        this.noForms = true\r\n    } else {\r\n        this.allForms = submissionData\r\n        for (let i = 0; i < this.allForms.length; i++) {\r\n          if (this.allForms[i].userId){\r\n            this.users.push(await this.angularFirestore.collection('users', ref => ref).doc(this.allForms[i].userId).valueChanges().pipe(first()).toPromise());\r\n          }\r\n          if (this.allForms[i].widgetId)\r\n          {\r\n            this.formTitles.push(await this.angularFirestore.collection('widgets', ref => ref).doc(this.allForms[i].widgetId).valueChanges().pipe(first()).toPromise());\r\n          }\r\n        }\r\n    }\r\n\r\n  }\r\n\r\n  isValidHttpUrl(string) {\r\n    let url;\r\n    \r\n    try {\r\n      url = new URL(string);\r\n    } catch (_) {\r\n      return false;  \r\n    }\r\n  \r\n    return url.protocol === \"http:\" || url.protocol === \"https:\";\r\n  }\r\n\r\n  async deleteForm(i){\r\n    await this.sharedService.presentLoading()\r\n    await this.angularFirestore.collection('forms').doc(this.allForms[i].id).delete()\r\n    this.allForms.splice(i,1)\r\n    this.sharedService.loading.dismiss()\r\n    this.sharedService.presentAlert('Form deleted successfully!')\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n"],"sourceRoot":""}