{"version":3,"sources":["./src/app/admin/free-products/free-products.page.html","./src/app/admin/free-products/free-products.module.ts","./src/app/admin/free-products/free-products.page.scss","./src/app/admin/free-products/free-products.page.ts"],"names":[],"mappings":"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","file":"admin-free-products-free-products-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar mode=\\\"ios\\\">\\r\\n    <ion-menu-button slot=\\\"start\\\" class=\\\"menu-btn\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\r\\n    </ion-menu-button>\\r\\n    <div class=\\\"header-logo\\\" slot=\\\"start\\\"><img src=\\\"../../../assets/img/shop-logo.png\\\"></div>\\r\\n    <ion-title text-center>Free product</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div class=\\\"main-container fixed-height\\\">\\r\\n    <ion-grid class=\\\"ion-no-padding\\\">\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <div>\\r\\n            <div class=\\\"flex-label\\\">\\r\\n              <ion-label>Active</ion-label>\\r\\n              <ion-toggle [(ngModel)]=\\\"freeProductsLimit\\\" (ionChange)=\\\"toggleActive()\\\"></ion-toggle>\\r\\n            </div>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ng-container *ngIf=\\\"freeProductsLimit\\\">\\r\\n      <ion-row *ngIf=\\\"limits.length > 0\\\">\\r\\n        <ion-col size=\\\"2\\\">\\r\\n          <p>Order Amount Limit</p>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"2\\\" >\\r\\n          <p>Per User Limit</p>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"5\\\" >\\r\\n          <p>Product</p>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"1\\\" class=\\\"t-a-c\\\">\\r\\n          <p>Active</p>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"2\\\" class=\\\"t-a-c\\\">\\r\\n          Action\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      \\r\\n        <ion-row *ngFor=\\\"let limit of limits; let i = index\\\">\\r\\n          <ion-col size=\\\"2\\\">\\r\\n              <ion-input class=\\\"form-input\\\" type=\\\"number\\\" [(ngModel)]=\\\"limit.orderAmount\\\"></ion-input>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"2\\\">\\r\\n              <ion-input class=\\\"form-input\\\" type=\\\"number\\\" [(ngModel)]=\\\"limit.perUser\\\"></ion-input>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"5\\\">\\r\\n              <ion-input class=\\\"form-input\\\" (click)=\\\"presentProductsModal(i)\\\" value=\\\"{{limit.product.name}} {{limit.product.variant ? limit.product.variant : ''}}\\\" readonly></ion-input>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"1\\\" class=\\\"vertical-center\\\">\\r\\n            <ion-toggle color=\\\"primary\\\" [(ngModel)]=\\\"limit.active\\\"></ion-toggle>\\r\\n          </ion-col>\\r\\n          <ion-col size=\\\"2\\\" class=\\\"vertical-center\\\" style=\\\"justify-content: space-around;\\\">\\r\\n            <ion-button (click)=\\\"remove(i, limit)\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"small\\\">\\r\\n              Remove\\r\\n            </ion-button>\\r\\n            <ion-button (click)=\\\"saveDetails(limit)\\\" color=\\\"success\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"small\\\">\\r\\n              Save\\r\\n            </ion-button>\\r\\n            <!-- <i class=\\\"flaticon-null-19 remove-icon\\\" (click)=\\\"remove(i)\\\"></i> -->\\r\\n          </ion-col>\\r\\n        </ion-row>\\r\\n      <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n        <ion-button (click)=\\\"addMore()\\\" fill=\\\"outline\\\" shape=\\\"round\\\" size=\\\"small\\\">\\r\\n          Add More Order Limits\\r\\n        </ion-button>\\r\\n      </ion-row>\\r\\n    </ng-container>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { FreeProductsPage } from './free-products.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: FreeProductsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes)\r\n  ],\r\n  declarations: [FreeProductsPage]\r\n})\r\nexport class FreeProductsPageModule {}\r\n","module.exports = \".remove-icon {\\n  cursor: pointer;\\n  margin-top: 12px;\\n  margin-left: 5px;\\n  color: var(--ion-color-danger);\\n  font-size: 16px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYWRtaW4vZnJlZS1wcm9kdWN0cy9DOlxcQldJLUFETUlOU1xcU2hlaW4tQWRtaW4tQ29kZS9zcmNcXGFwcFxcYWRtaW5cXGZyZWUtcHJvZHVjdHNcXGZyZWUtcHJvZHVjdHMucGFnZS5zY3NzIiwic3JjL2FwcC9hZG1pbi9mcmVlLXByb2R1Y3RzL2ZyZWUtcHJvZHVjdHMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBQTtFQUNBLGdCQUFBO0VBQ0EsZ0JBQUE7RUFDQSw4QkFBQTtFQUNBLGVBQUE7QUNDSiIsImZpbGUiOiJzcmMvYXBwL2FkbWluL2ZyZWUtcHJvZHVjdHMvZnJlZS1wcm9kdWN0cy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIucmVtb3ZlLWljb257XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xyXG4gICAgbWFyZ2luLWxlZnQ6IDVweDtcclxuICAgIGNvbG9yOiB2YXIoLS1pb24tY29sb3ItZGFuZ2VyKTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDtcclxuICB9IiwiLnJlbW92ZS1pY29uIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBtYXJnaW4tdG9wOiAxMnB4O1xuICBtYXJnaW4tbGVmdDogNXB4O1xuICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLWRhbmdlcik7XG4gIGZvbnQtc2l6ZTogMTZweDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { AdminSettingsService } from 'src/app/services/admin-settings/admin-settings.service';\r\nimport { SharedService } from 'src/app/services/shared/shared.service';\r\nimport { ProductsModalPage } from '../products-modal/products-modal.page';\r\n\r\n@Component({\r\n  selector: 'app-free-products',\r\n  templateUrl: './free-products.page.html',\r\n  styleUrls: ['./free-products.page.scss'],\r\n})\r\nexport class FreeProductsPage implements OnInit {\r\n  freeProductsLimit = false;\r\n  limits = [\r\n    {\r\n    active: true,\r\n    createdAt: new Date(),\r\n    orderAmount: 0,\r\n    perUser: 1,\r\n    product: {\r\n      type: '',\r\n      id: '',\r\n      name: ''\r\n    }\r\n  }\r\n  ];\r\n\r\n  constructor(private sharedService: SharedService, private modalController: ModalController, private adminSettings: AdminSettingsService) { }\r\n\r\n  ngOnInit() { }\r\n\r\n  async ionViewWillEnter() {\r\n    let obj:any = await this.adminSettings.getFreeProdLimit();\r\n    console.log('obj:', obj);\r\n    if (obj.freeProdLimit) {\r\n      this.freeProductsLimit = obj.freeProdLimit.active ? obj.freeProdLimit.active : this.freeProductsLimit;\r\n    }\r\n    this.limits = obj.limits ? obj.limits : this.limits;\r\n  }\r\n\r\n  async toggleActive(){\r\n    await this.adminSettings.saveFreeProdLimit({active: this.freeProductsLimit});\r\n  }\r\n\r\n  addMore(){\r\n      this.limits.push({active: true, createdAt: new Date(), orderAmount: 0, perUser: 1, product: {type: '', id: '', name: ''} });\r\n  }\r\n\r\n  async remove(index, limit){\r\n    let deleted = await this.adminSettings.deleteFreeProdLimit(limit);\r\n    if (deleted) {\r\n      this.limits.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  async presentProductsModal(index){\r\n    const modal = await this.modalController.create({\r\n    component: ProductsModalPage,\r\n    backdropDismiss: false,\r\n    });\r\n    modal.onDidDismiss()\r\n    .then((res) => {\r\n      console.log('res.data',res);\r\n      // if(res.data && res.data.id) {\r\n      //   console.log('res.data',res.data);\r\n      //   this.limits[index].product.id = res.data.id;\r\n      //   this.limits[index].product.name = res.data.name;\r\n      //   if (res.data.variant) {\r\n      //     this.limits[index].product['variant'] = res.data.variant;\r\n      //     this.limits[index].product.type = 'variant';\r\n      //   } else{\r\n      //     this.limits[index].product.type = 'single';\r\n      //     delete this.limits[index].product['variant'];\r\n      //   }\r\n      //   console.log('variant:', this.limits[index].product['variant']);\r\n      // }\r\n\r\n      if (res.data && res.data && res.data.length) {\r\n        for (const product of res.data) {\r\n          console.log('res.data', res.data);\r\n          this.limits[index].product.id = product.id;\r\n          this.limits[index].product.name = product.name;\r\n          console.log(\"res.data.variant\",product.variant);\r\n          if (product.variant) {\r\n            this.limits[index].product['variant'] = product.variant;\r\n            this.limits[index].product.type = 'variant';\r\n          } else {\r\n            this.limits[index].product.type = 'single';\r\n            delete this.limits[index].product['variant'];\r\n          }\r\n        }\r\n        console.log('variant:', this.limits[index].product['variant']);\r\n      }\r\n\r\n  });\r\n    await modal.present();\r\n  }\r\n  \r\n  async saveDetails(limit){\r\n      if (limit.orderAmount!=null && limit.product.id && limit.perUser) {\r\n        this.sharedService.presentLoading();\r\n        let saved = await this.adminSettings.saveFreeProdLimits(limit);\r\n        if (saved.success) {\r\n          let obj:any = await this.adminSettings.getFreeProdLimit();\r\n          this.limits = obj.limits ? obj.limits : this.limits;\r\n          if (this.sharedService.loading) {\r\n            this.sharedService.loading.dismiss();\r\n          }\r\n          this.sharedService.presentAlert(`Order Amount of ${limit.orderAmount} with free product ${limit.product.name} saved sucessfully.`);\r\n        } else {\r\n          if (this.sharedService.loading) {\r\n            this.sharedService.loading.dismiss();\r\n          }\r\n          this.sharedService.presentAlert('Something went wrong. Please try again later');\r\n        }\r\n      } else {\r\n        this.sharedService.presentAlert('Order Amount, product & per user limit cant be empty, either remove the field or fill them');\r\n      \r\n    }\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}