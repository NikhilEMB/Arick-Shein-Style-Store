{"version":3,"sources":["./src/app/services/pickUp/pick-up.service.ts"],"names":[],"mappings":"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","file":"default~admin-admin-orders-admin-orders-module~admin-import-export-manager-orders-export-orders-expo~a38f7326-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { first, map } from 'rxjs/operators';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PickUpService {\r\n\r\n  constructor(private afs: AngularFirestore, private storage: Storage ) { }\r\n\r\n  async getUserDetails(id){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('users').doc(id).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getWalletSettings(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('settings').doc('wallet').valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async setPickUpSettings(settings){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let settingsObj = {\r\n          active: settings.active,\r\n          gst: settings.gst,\r\n          deliveryByWeight: {\r\n            baseCost: settings.baseCost,\r\n            baseWeight: settings.baseWeight,\r\n            cost: settings.cost\r\n          },\r\n          deliveryByKm: {\r\n            cost: settings.cost\r\n          },\r\n          weightSlab:{\r\n            active: settings.weightActive,\r\n            slabs: settings.slabs\r\n          }\r\n        }\r\n        console.log('settingsObj:',settingsObj);\r\n        // console.log('kmSlabsObj:',kmSlabsObj);\r\n        console.log('settings:',settings);\r\n\r\n        await this.afs.collection('features').doc('pickDrop').set(settingsObj);\r\n        // await this.afs.collection('features').doc('pickDrop').update(kmSlabsObj);\r\n        resolve(true);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getPickUpSettings(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getPendingOrders(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref\r\n        .orderBy('createdAt', 'desc')\r\n        .where('status', '==', 'pending')).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getPickedOrders(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref\r\n        .orderBy('createdAt', 'desc')\r\n        .where('status', 'in', ['picked'])).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n  \r\n  async getDeliveredOrders(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref\r\n        .orderBy('createdAt', 'desc')\r\n        .where('status', 'in', ['delivered'])).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getCancelledOrders(){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref\r\n        .orderBy('createdAt', 'desc')\r\n        .where('status', 'in', ['cancelled'])).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n  \r\n  async getOrderData(id){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        resolve(await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref.where('orderId', '==', id)).valueChanges().pipe(first()).toPromise());\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async cancelOrderByAdmin(orderId: number, cancelReason: string, name:string) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const orderRef = this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref.where('orderId', '==', orderId));\r\n        const orderData: any = await orderRef.snapshotChanges().pipe(\r\n          map(actions => actions.map(a => {\r\n            const data = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n          }))\r\n        ).pipe(first()).toPromise();\r\n  \r\n        let role = await this.storage.get('userRole');\r\n        role = role === 'admin' ? 'Store' : role;\r\n        const updateObj = {\r\n          cancelData: {\r\n            reason: cancelReason,\r\n            by: `${name} (${role})`\r\n          },\r\n          status: 'cancelled'\r\n        }\r\n        await this.afs.collection('features').doc('pickDrop').collection('orders').doc(orderData[0].id).update(updateObj);\r\n        resolve(true)\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async changeOrderStatus(id,status){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let order = await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref.where('orderId', '==', id)).snapshotChanges().pipe(\r\n          map(actions => actions.map(a => {\r\n            const data = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n          }))\r\n        ).pipe(first()).toPromise();\r\n        await this.afs.collection('features').doc('pickDrop').collection('orders').doc(order[0].id).update({status: status})\r\n        resolve(true)\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  async getAllDeliveryAgents() {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        const allDeliveryAgents = await this.afs.collection('users', ref => ref.where('role', '==', 'deliveryAgent')).snapshotChanges().pipe(\r\n          map(actions => actions.map(a => {\r\n            const data: any = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n          }))\r\n        ).pipe(first()).toPromise();\r\n        resolve(allDeliveryAgents)\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async assignDeliveryAgent(agentId, orderId) {\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let order = await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref.where('orderId', '==', orderId)).snapshotChanges().pipe(\r\n          map(actions => actions.map(a => {\r\n            const data = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n          }))\r\n        ).pipe(first()).toPromise();\r\n        await this.afs.collection('features').doc('pickDrop').collection('orders').doc(order[0].id).update({\"delivery.agentId\": agentId})\r\n        resolve(true)\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async getDeliveryAgentName(id){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let currentData = await this.afs.collection('users').doc(id).valueChanges().pipe(first()).toPromise();\r\n        resolve(currentData);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    })\r\n  }\r\n\r\n  async getOrderLogs(id){\r\n    return new Promise(async (resolve, reject) => {\r\n      try {\r\n        let order = await this.afs.collection('features').doc('pickDrop').collection('orders', ref => ref.where('orderId', '==', id)).snapshotChanges().pipe(\r\n          map(actions => actions.map(a => {\r\n            const data = a.payload.doc.data();\r\n            const id = a.payload.doc.id;\r\n            return { id, ...data };\r\n          }))\r\n        ).pipe(first()).toPromise();\r\n        let logData = await this.afs.collection('features').doc('pickDrop').collection('orders').doc(order[0].id).collection('logs', ref => ref.orderBy('time', 'asc')).valueChanges().pipe(first()).toPromise();\r\n        resolve(logData);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    });\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":""}